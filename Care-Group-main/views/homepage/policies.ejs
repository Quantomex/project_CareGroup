<select name="policy1" id="policy1">
    <% policies.forEach((policy, i) => { %>
        <option value="<%= i %>"><%= policy.name %></option>
    <% }) %>
</select>
<% policies.forEach((policy, i) => { %>
    <div class="policy" data-description="<%= policy.description %>"></div>
    <div id="showtext<%= i %>" class="showtext"></div>
<% }) %>
<script>
    const policyDivs = document.querySelectorAll(".policy");
    const selectElement = document.getElementById("policy1");
    let lastSelectedOptionIndex = -1; // Initialize with an invalid index

    selectElement.addEventListener("change", function () {
        const selectedOptionIndex = parseInt(this.value);
        const selectedPolicyDiv = policyDivs[selectedOptionIndex];
        const showtext = document.querySelector(`#showtext${selectedOptionIndex}`);

        // Clear the previous selection if it's different
        if (selectedOptionIndex !== lastSelectedOptionIndex) {
            if (lastSelectedOptionIndex !== -1) {
                const lastShowtext = document.querySelector(`#showtext${lastSelectedOptionIndex}`);
                lastShowtext.innerHTML = "";
            }
            lastSelectedOptionIndex = selectedOptionIndex;
        }

        // Hide all policy descriptions
        policyDivs.forEach((div) => {
            div.style.display = "none";
        });

        // Display the selected policy description
        selectedPolicyDiv.style.display = "block";

        // Set the selected description in showtext innerHTML
        showtext.innerHTML = selectedPolicyDiv.getAttribute("data-description");
    });

    // Trigger the "change" event manually for the initial option (index 0)
    selectElement.dispatchEvent(new Event("change"));
    // Trigger the "change" event manually for the initial option (index 0)

</script>
